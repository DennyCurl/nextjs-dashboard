<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç API drug-administrations</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
        }

        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007acc;
        }

        .result {
            background: #e8f5e8;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #4caf50;
            max-height: 400px;
            overflow-y: auto;
        }

        .error {
            background: #ffe8e8;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
            border: 1px solid #ff4444;
        }

        .api-url {
            background: #f0f0f0;
            padding: 8px;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
            margin: 10px 0;
        }

        button {
            background: #007acc;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }

        button:hover {
            background: #005a9e;
        }

        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .input-group {
            margin: 10px 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 200px;
        }
    </style>
</head>

<body>
    <h1>üß™ –¢–µ—Å—Ç API drug-administrations</h1>

    <div class="test-section">
        <h2>1. –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –≤–∏–¥–∞—á—ñ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ñ–≤ (–æ—Å—Ç–∞–Ω–Ω—ñ 100)</h2>
        <div class="api-url">GET /api/drug-administrations</div>
        <button onclick="testAllAdministrations()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
        <div id="all-result" class="result" style="display: none;">
            <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
            <pre id="all-data"></pre>
        </div>
    </div>

    <div class="test-section">
        <h2>2. –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–¥–∞—á—ñ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—ñ–∑–∏—Ç—É</h2>
        <div class="input-group">
            <label for="visitId">ID –≤—ñ–∑–∏—Ç—É:</label>
            <input type="number" id="visitId" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 1" />
        </div>
        <div class="api-url">GET /api/drug-administrations?visitId={visitId}</div>
        <button onclick="testVisitAdministrations()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
        <div id="visit-result" class="result" style="display: none;">
            <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
            <pre id="visit-data"></pre>
        </div>
    </div>

    <div class="test-section">
        <h2>3. –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–¥–∞—á—ñ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ñ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ü—ñ—î–Ω—Ç–∞</h2>
        <div class="input-group">
            <label for="patientId">ID –ø–∞—Ü—ñ—î–Ω—Ç–∞:</label>
            <input type="number" id="patientId" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: 1" />
        </div>
        <div class="api-url">GET /api/drug-administrations?patientId={patientId}</div>
        <button onclick="testPatientAdministrations()">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
        <div id="patient-result" class="result" style="display: none;">
            <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h4>
            <pre id="patient-data"></pre>
        </div>
    </div>

    <div class="test-section">
        <h2>4. –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</h2>
        <ol>
            <li>–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π (<code>npm run dev</code>)</li>
            <li>–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –æ–≥–ª—è–¥ –ø–∞—Ü—ñ—î–Ω—Ç–∞ –∑ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É</li>
            <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü—ñ —Ç–µ—Å—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö</li>
            <li>–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä—ñ–∑–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó: –ø–æ –≤—ñ–∑–∏—Ç—É, –ø–æ –ø–∞—Ü—ñ—î–Ω—Ç—É, –≤—Å—ñ –∑–∞–ø–∏—Å–∏</li>
        </ol>
        <button onclick="window.open('/dashboard/visits/create', '_blank')">
            –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–æ—Ä–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–≥–ª—è–¥—É
        </button>
    </div>

    <script>
        async function testAllAdministrations() {
            const resultDiv = document.getElementById('all-result');
            const dataDiv = document.getElementById('all-data');

            try {
                resultDiv.style.display = 'block';
                dataDiv.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...';

                const response = await fetch('/api/drug-administrations');
                const data = await response.json();

                if (response.ok) {
                    dataDiv.textContent = JSON.stringify(data, null, 2);
                    resultDiv.className = 'result';
                } else {
                    dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${JSON.stringify(data, null, 2)}`;
                    resultDiv.className = 'error';
                }
            } catch (error) {
                dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
                resultDiv.className = 'error';
            }
        }

        async function testVisitAdministrations() {
            const visitId = document.getElementById('visitId').value;
            const resultDiv = document.getElementById('visit-result');
            const dataDiv = document.getElementById('visit-data');

            if (!visitId) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å ID –≤—ñ–∑–∏—Ç—É');
                return;
            }

            try {
                resultDiv.style.display = 'block';
                dataDiv.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...';

                const response = await fetch(`/api/drug-administrations?visitId=${visitId}`);
                const data = await response.json();

                if (response.ok) {
                    dataDiv.textContent = JSON.stringify(data, null, 2);
                    resultDiv.className = 'result';
                } else {
                    dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${JSON.stringify(data, null, 2)}`;
                    resultDiv.className = 'error';
                }
            } catch (error) {
                dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
                resultDiv.className = 'error';
            }
        }

        async function testPatientAdministrations() {
            const patientId = document.getElementById('patientId').value;
            const resultDiv = document.getElementById('patient-result');
            const dataDiv = document.getElementById('patient-data');

            if (!patientId) {
                alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å ID –ø–∞—Ü—ñ—î–Ω—Ç–∞');
                return;
            }

            try {
                resultDiv.style.display = 'block';
                dataDiv.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...';

                const response = await fetch(`/api/drug-administrations?patientId=${patientId}`);
                const data = await response.json();

                if (response.ok) {
                    dataDiv.textContent = JSON.stringify(data, null, 2);
                    resultDiv.className = 'result';
                } else {
                    dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${JSON.stringify(data, null, 2)}`;
                    resultDiv.className = 'error';
                }
            } catch (error) {
                dataDiv.textContent = `–ü–æ–º–∏–ª–∫–∞: ${error.message}`;
                resultDiv.className = 'error';
            }
        }
    </script>
</body>

</html>